pages:
  - name: Home-Server
    columns:
      - size: small
        widgets:
          - type: docker-containers
            title: Containers

      - size: full
        widgets:
          - type: monitor
            title: Service status
            cache: 1m
            sites:
              - title: Pi-hole
                url: http://192.168.178.10:8081/admin
                icon: si:pihole
                alt-status-codes: [403]

              - title: Vaultwarden
                url: https://beelink.vault
                icon: si:vaultwarden
                insecure: true
                check-url: http://192.168.178.10:80

              - title: Wiki.js
                url: http://beelink.wiki
                icon: si:wikipedia
                insecure: true
                check-url: http://192.168.178.10:3001

              - title: Immich
                url: http://beelink.immich
                icon: si:immich
                insecure: true
                check-url: http://192.168.178.10:2283

              - title: Nextcloud
                url: http://beelink.nas
                icon: si:nextcloud
                insecure: true
                check-url: http://192.168.178.10:8082

              - title: Grafana
                url: http://beelink.grafana/dashboards
                icon: si:grafana
                insecure: true
                check-url: http://192.168.178.10:3000

              - title: Prometheus
                url: http://beelink.prometheus
                icon: si:prometheus
                insecure: true
                check-url: http://192.168.178.10:9090

              - title: Portainer
                url: http://beelink.portainer
                icon: si:portainer
                insecure: true
                check-url: http://192.168.178.10:9000

              - title: Glances
                url: http://beelink.glances
                icon: si:glances
                insecure: true
                check-url: http://192.168.178.10:61208

      - size: small
        widgets:
          - type: dns-stats
            title: Pi-hole stats
            service: pihole-v6
            url: http://192.168.178.10:8081
            password: 1234
            hour-format: 24h
          - type: server-stats
            title: Server stats
          - type: custom-api
            title: Disk Usage
            url: "http://192.168.178.10:8000"
            cache: 1m
            template: |
              <div style="font-family: monospace; font-size: 14px;">
                <div style="margin-bottom: 12px;">
                  <strong>Root</strong><br/>
                  <div class="color-highlight size-h3">{{ .JSON.String "root.used" }} / {{ .JSON.String "root.total" }} ({{ .JSON.Int "root.percent" }} %)</div>
                  <div style="background: #333; width: 100%; height: 8px; border-radius: 4px; overflow: hidden;">
                    <div style="background: #999; width: {{ .JSON.Int "root.percent" }}%; height: 8px;"></div>
                  </div>
                </div>

                <div>
                  <strong>Immich</strong><br/>
                  <div class="color-highlight size-h3">{{ .JSON.String "immich.used" }} / {{ .JSON.String "immich.total" }} ({{ .JSON.Int "immich.percent" }} %)</div>
                  <div style="background: #333; width: 100%; height: 8px; border-radius: 4px; overflow: hidden;">
                    <div style="background: #999; width: {{ .JSON.Int "immich.percent" }}%; height: 8px;"></div>
                  </div>
                </div>
              </div>
          
          - type: custom-api
            title: Immich stats
            cache: 1d
            url: http://192.168.178.10:2283/api/server/statistics
            headers:
              x-api-key: FWf1IbsDpf2xAdNTju0Beo49fkb7U3fER1IxOqy2C0
              Accept: application/json
            template: |
              <div class="flex justify-between text-center">
                <div>
                    <div class="color-highlight size-h3">{{ .JSON.Int "photos" | formatNumber }}</div>
                    <div class="size-h6">PHOTOS</div>
                </div>
                <div>
                    <div class="color-highlight size-h3">{{ .JSON.Int "videos" | formatNumber }}</div>
                    <div class="size-h6">VIDEOS</div>
                </div>
                <div>
                    <div class="color-highlight size-h3">{{ div (.JSON.Int "usage" | toFloat) 1073741824 | toInt | formatNumber }}GB</div>
                    <div class="size-h6">USAGE</div>
                </div>
              </div>
          
          - type: custom-api
            title: Current watt usage
            cache: 5s
            url: "http://192.168.178.10:9090/api/v1/query?query=sum%20by%20(source)(tasmota_status_sns_energy_power%7Bjob%3D%22tasmota%22%2Csource%3D~%22stat/(desk|pc)%22%7D)"
            template: |
              <div style="font-family: monospace; font-size: 14px; padding: 4px 8px;">
                <table style="width: 100%;">
                  {{ range .JSON.Array "data.result" }}
                    {{ $src := .String "metric.source" }}
                    {{ $val := .Float "value.1" }}
                    {{ if eq $src "stat/desk" }}
                      <tr><td>DESK</td><td style="text-align: right;" class="color-highlight size-h3">{{ printf "%.0f" $val }} W</td></tr>
                    {{ end }}
                    {{ if eq $src "stat/pc" }}
                      <tr><td>PC</td><td style="text-align: right;" class="color-highlight size-h3">{{ printf "%.0f" $val }} W</td></tr>
                    {{ end }}
                  {{ end }}
                </table>
              </div>
